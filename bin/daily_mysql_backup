#!/usr/bin/perl -w

# daily_mysql_backup
#
# args:
#	-s server	target server
#	-a		all databases
#	DB1 DB2 DB3
#
# TODO:
# * process args
# * everything

use strict;
use AppConfig;

#
# CONFIGURATION
#

# create a new AppConfig object
my $app_config = {};
my $config = AppConfig->new( $app_config );

# define variables
$config->define( 's|server=s' );

# read configuration file
my $config_file = '/etc/fini/daily_mysql_backup.conf';
if (-r $config_file) {
	$config->file($config_file);
}

# parse command line options
$config->args();      # default to \@ARGV

#$config->varname($value);
#$config->varname;

# validate
my $server = $config->server or die "no server";

print "ARGV=@ARGV\N";

#
# get local hostname
#

die "unimplemented";


#
# detect mysql flavor
#

die "unimplemented";

#
# check connectivity and disk space to server
#

print "backing up to $server\n";
die "unimplemented";

#
# backup to local text file
#

die "unimplemented";

#
# rsync to remote server
#

#
# kick off diff/compress on remote server
#

